\chapter{Relazioni di equivalenza e applicazioni}

\section{Le relazioni di equivalenza}

Utilizzando le nozioni di base della teoria degli
insiemi è possibile definire formalmente il concetto
di relazione di equivalenza.

Dato un sottoinsieme $R$ di $A \times A$, $R$ si
dice relazione di equivalenza se:

\begin{itemize}
    \item $(a,a) \in R$ (proprietà riflessiva)
    \item $(a,b) \in R \implies (b,a) \in R$ (proprietà simmetrica)
    \item $(a,b), (b,c) \in R \implies (a,c) \in R$ (proprietà transitiva)
\end{itemize}

Tale definizione può essere semplificata
implementando l'operazione binaria $\sim$ tale per cui
$a\sim b \iff (a,b) \in R$. In questo modo, le condizioni
di una relazione di equivalenza $R$ diventano:

\begin{itemize}
    \item $a \sim a$
    \item $a \sim b \implies b \sim a$
    \item $a \sim b \land b \sim c \implies a \sim c$
\end{itemize}

\begin{lemma}
    Definita una relazione di equivalenza $R$ con operazione
    binaria $\sim$, $a \sim b \land c \sim b \implies a \sim c$.
\end{lemma}

\begin{proof}
    Dalla proprietà riflessiva di $R$, $c \sim b \implies b \sim c$.
    Verificandosi sia $a \sim b$ che $b \sim c$, si applica la proprietà
    transitiva di $R$, che implica $a \sim c$.
\end{proof}

\subsection{Classi di equivalenza}

Si definisce classe di equivalenza di $a$ per un certo insieme
$A$ e una certa relazione di equivalenza $R$ l'insieme
$\cl(a)=\{x \in A \mid a \sim x\}$, ossia l'insieme di tutti i punti che
si relazionano ad $a$ mediante tale relazione di equivalenza.

\begin{theorem}
    Le classi di equivalenza partizionano l'insieme di relazione
    in insiemi a due a due disgiunti.
\end{theorem}

\begin{proof}
    Prima di tutto è necessario dimostrare che l'unione di tutte
    le classi di equivalenza dà luogo all'insieme di relazione $A$.

    Per ogni elemento $a \in A$, $a$ appartiene a $\cl(a)$ per la proprietà
    riflessiva di $R$, ossia della relazione di equivalenza su cui
    $\cl$ è definita. Pertanto $\bigcup_{a \in A} \cl(a)$, che contiene solo
    elementi di $A$, è uguale ad $A$.

    In secondo luogo, è necessario dimostrare che le classi di equivalenza
    sono o disgiunte o identiche. Ponendo l'esistenza
    di un $a \in \cl(x) \, \cap \, \cl(y)$, la dimostrazione deriva dalle proprietà
    di $R$: sia $b \in cl(x)$, allora $b \sim a$; dunque, dal momento che $b \sim a$ e che
    $a \sim y$, $b \sim y$, ossia $\cl(x) \subseteq \cl(y)$ (analogamente si ottiene
    $\cl(y) \subseteq \cl(x)$, e quindi $\cl(x) = \cl(y)$).
\end{proof}

\begin{theorem}
    Data una partizione di un insieme che lo compone in insiemi a due
    a due disgiunti, è sempre possibile costruire delle classi di equivalenza.
\end{theorem}

\begin{proof}
    Vogliamo dimostrare che, data la stessa appartenenza ad un insieme come relazione,
    essa è una relazione di equivalenza.

    Sicuramente $a \sim a$ (proprietà riflessiva).
    Inoltre, $a \sim b \implies a, b \in A_\alpha \implies b \sim a$
    (proprietà simmetrica).
    Infine, $a \sim b, \, b \sim c \implies a, b, c \in A_\alpha \implies a \sim c$
    (proprietà transitiva).

    In particolare, dato $a \in A_\alpha$, $\cl(a) = A_\alpha$.
\end{proof}

\section{Le applicazioni}

La nozione di applicazione di un insieme in un altro ci permette
di generalizzare, ma soprattutto di definire, il concetto di
funzione.

\begin{definition}[Applicazione]
    Dati due insiemi $S$ e $T$, si dice che $\sigma$ è un'applicazione
    da $S$ a $T$, se $\sigma \subseteq (S \times T) \land \forall s \in S, \existsone
        t \in T \mid (s, t) \in \sigma$. Tale applicazione allora si scrive come
    $\sigma : S \to T$.
\end{definition}

Si scrive $\sigma : s \rightarrowtail \sigma(s)$ per sottintendere che
$\forall \, (s, t) \in \sigma, (s, t) = (s, \sigma(t))$. Dato
$t=\sigma(s)$, si dice che $t$ è l'\textit{immagine} di $s$ appartenente
al \textit{codominio} $T$, enunciato come $\Codom(\sigma)$, mentre $s$ è
la \textit{preimmagine} di $t$, appartenente al \textit{dominio} $S$, detto
$\Dom(\sigma)$. L'insieme ${(s, t) \in \Dom(\sigma) \times \Codom(\sigma) \mid (s, t) \in \sigma}$ è
detto \textit{grafico} di $\sigma$, ossia $\Gr(\sigma)$.


\subsection{Proprietà delle applicazioni}

\begin{definition}[Iniettività]
    Un'applicazione si dice iniettiva se ad ogni immagine
    è corrisposto al più un elemento, ossia anche che
    $s_1 \neq s_2 \implies \sigma(s_1) \neq \sigma(s_2)$.
\end{definition}

\begin{definition}[Surgettività]
    Un'applicazione si dice surgettiva (o talvolta \textit{su $T$}) se ad ogni immagine
    è corrisposto almeno un elemento, ossia anche che
    $\forall t \in T, \exists s \mid \sigma(s) = t$.
\end{definition}

\begin{definition}[Bigettività]
    Un'applicazione si dice bigettiva se è sia iniettiva che
    suriettiva, ossia se $\forall t \in T, \existsone s \in S
        \mid \sigma(s) = t$.
\end{definition}

\subsection{Composizione di applicazioni}

\begin{definition}[Composizione]
    Date due applicazioni $\sigma : S \to T$ e
    $\tau : T \to U$, si può definire
    un'applicazione detta composizione
    $(\tau \circ \sigma) : S \to U$, tale per cui
    $(\tau \circ \sigma) : s \mapsto \tau(\sigma(s))$.
\end{definition}

Dobbiamo tuttavia assicurarci che tale applicazione
possa esistere, ossia verificare che $\forall s \in S \existsone
    u \in U \mid (s, u) \in S \times U$; quindi che $\tau(\sigma(s))$
sia unico. Tuttavia questa proprietà è banale: $\sigma(s)$ è Sicuramente
unico poiché $\sigma$ è un'applicazione, e pertanto $\tau(\sigma(s))$ lo è,
essendo anch'essa un'applicazione.

\subsubsection{Proprietà associativa della composizione}

È inoltre interessante dimostrare che la composizione rispetta la proprietà associativa,
ossia che $(\alpha \circ \beta) \circ \gamma = \alpha \circ (\beta \circ \gamma)$.

\begin{lemma}[Proprietà associativa della composizione]
    \label{lemma:associativita_composizione}
    Date tre applicazioni $\alpha$, $\beta$, $\gamma$,
    $(\alpha \circ \beta) \circ \gamma = \alpha \circ (\beta \circ \gamma)$.
\end{lemma}

\begin{proof}
    Preso un $a$ appartenente al dominio di $\gamma$, per il primo membro abbiamo:

    $$((\alpha \circ \beta) \circ \gamma)(a) = (\alpha \circ \beta)(\gamma(a)) =
        \alpha(\beta(\gamma(a)))$$

    Analogamente per il secondo membro abbiamo:

    $$(\alpha \circ (\beta \circ \gamma))(a) = \alpha((\beta \circ \gamma)(a)) =
        \alpha(\beta(\gamma(a)))$$
\end{proof}

\subsubsection{Iniettività, surgettività e bigettività della composizione}

L'iniettività, la surgettività e la bigettività di una composizione sono
ereditate dalle applicazioni di cui è composta se tutte queste le rispettano, ossia:

\begin{itemize}
    \item $(\tau \circ \sigma)$ è iniettiva se $\tau$ e $\sigma$ lo sono.
    \item $(\tau \circ \sigma)$ è surgettiva se $\tau$ e $\sigma$ lo sono.
    \item $(\tau \circ \sigma)$ è bigettiva se $\tau$ e $\sigma$ lo sono.
\end{itemize}

\begin{lemma}[Iniettività della composizione]
    \label{lemma:iniettivita_composizione}
    $(\tau \circ \sigma)$ è iniettiva se $\tau$ e $\sigma$ lo sono.
\end{lemma}

\begin{proof}
    Dal momento che $\sigma$ è iniettiva $s_1 \neq s_2 \implies \sigma(s_1) \neq \sigma(s_2)$,
    ma a sua volta, essendo $\tau$ iniettiva, $\sigma(s_1) \neq \sigma(s_2) \implies
        \tau(\sigma(s_1)) \neq \tau(\sigma(s_2))$.
\end{proof}

\begin{lemma}[Surgettività della composizione]
    \label{lemma:surgettivita_composizione}
    $(\tau \circ \sigma)$ è surgettiva se $\tau$ e $\sigma$ lo sono.
\end{lemma}

\begin{proof}
    Dal momento che $\tau$ è surgettiva, allora $\forall u \in
    \Codom(\tau), \exists t \in \Dom(\tau) \mid u = \tau(t)$.
    Poiché $t \in \Codom(\sigma)$, allora, poiché anche
    $\sigma$ è surgettiva, $\exists s \in \Dom(\sigma) \mid
        t = \sigma(s)$. Pertanto $\exists s \in \Dom(\sigma) \mid
        u = \tau(\sigma(s))$. 
\end{proof}

\begin{lemma}[Bigettività della composizione]
    \label{lemma:bigettivita_composizione}
    $(\tau \circ \sigma)$ è bigettiva se $\tau$ e $\sigma$ lo sono.
\end{lemma}

\begin{proof}
    Se $\tau$ e $\sigma$ sono bigettive, sono sia iniettive che surgettive;
    pertanto $(\tau \circ \sigma)$ è sia iniettiva che bigettiva per i
    lemmi \ref{lemma:iniettivita_composizione} e
    \ref{lemma:surgettivita_composizione}.
\end{proof}

\section{Applicazione inversa}

Qualora un'applicazione $\sigma : S \to T$ sia bigettiva, si dice che essa
crea una \textit{corrispondenza biunivoca} tra $S$ e $T$, ossia che dato un
elemento qualsiasi appartenente a $S$ è possibile associarlo ad un unico elemento
di $T$, e viceversa. Questo è possibile dal momento che $\sigma$ è sia iniettiva
($\forall t \in T, \existsone \lor \nexists s \in S \mid t = \sigma(s)$) che
surgettiva ($\forall t \in T, \exists s \in S \mid t = \sigma(s)$), prescrivendo
che $\forall t \in T, \existsone s \in S \mid t = \sigma(s)$.

Da questa conclusione è possibile definire l'\textit{applicazione inversa} di
$\sigma$, detta $\sigma^{-1}$, che è l'applicazione che associa ad ogni $t \in T$
un unico $s \in S$. Quindi, $t = \sigma(s) \iff s = \sigma^{-1} (t)$.

In particolare, $(\sigma \circ \sigma^{-1}) = (\sigma^{-1} \circ \sigma) = \Id$,
ossia l'identità di $\sigma$, per la quale ogni elemento viene associato a sé stesso.
Banalmente, per ogni applicazione $\alpha$, $(\alpha \circ \Id) = (\Id \circ \alpha) = \alpha$.

\begin{lemma}
    \label{lemma:inversa_applicazione}
    $\sigma : S \to T$ è una corrispondenza biunivoca se e solo se
    esiste un'applicazione $\mu : T \to S$ tale per cui
    $(\sigma \circ \mu) = (\mu \circ \sigma) = \Id$.
\end{lemma}

\begin{proof}
    Dal momento che $\sigma$ è bigettiva, $\sigma^{-1}$ esiste, e questa è
    tale per cui $(\sigma \circ \mu) = (\mu \circ \sigma) = \Id$.

    In direzione opposta, se esiste una $\mu$ tale per cui $(\sigma \circ \mu) =
    (\mu \circ \sigma) = \Id$, allora:

    \begin{itemize}
        \item $\sigma$ è iniettiva: $\sigma(s_1) = \sigma(s_2) \implies
        \mu(\sigma(s_1)) = \mu(\sigma(s_2)) \implies s_1 = s_2$.
        \item $\sigma$ è surgettiva: $\forall t \in T, t = \sigma(\mu(t)) \implies
        \exists s = \mu(t) \in S \mid t = \sigma(s)$.
    \end{itemize}
\end{proof}

\begin{lemma}[Unicità dell'applicazione inversa]
    Per ogni applicazione bigettiva $\sigma$, $\sigma^{-1}$ è unica.
\end{lemma}

\begin{proof}
    Poniamo $\alpha \neq \beta$ come due applicazioni inverse distinte
    di $\sigma$. Allora $\alpha = \alpha \circ (\sigma \circ \beta) =
    (\alpha \circ \sigma) \circ \beta = \beta$, che è una contraddizione.
\end{proof}

\section{Il gruppo \texorpdfstring{$A(S)$}{A(S)} delle corrispondenze biunivoche}

Si definisce $A(S)$ come l'insieme $\{\sigma : S \to S \mid \sigma \text{ sia biunivoca}\} =
\{\sigma : S \to S \mid \forall s \in S \existsone t \in S \mid t = \sigma(s)\}$.

Prendendo in considerazione l'operazione di composizione $\circ$, si può dimostrare
che $(A(S), \circ)$ è un gruppo:

\begin{itemize}
    \item $\forall \alpha, \beta \in A(S), \alpha \circ \beta \in A(S)$ (vd. Lemma \ref{lemma:bigettivita_composizione}).
    \item $\forall \alpha, \beta, \gamma \in A(S), (\alpha \circ \beta) \circ \gamma = \alpha \circ (\beta \circ \gamma)$ (vd. Lemma \ref{lemma:associativita_composizione}).
    \item $\exists \Id \in A(S) \mid \forall \alpha \in A(S), (\Id \circ \alpha) = (\alpha \circ \Id) = \alpha$.
    \item $\forall \alpha \in A(S), \exists \alpha^{-1} \in A(S) \mid (\alpha \circ \alpha^{-1}) = (\alpha^{-1} \circ \alpha) = \Id$ (vd. Lemma \ref{lemma:inversa_applicazione}).
\end{itemize}

\begin{lemma}
    Se $S$ consta di più di due elementi ($\nnorm{S} > 2$), allora esistono sicuramente
    due applicazioni $\alpha, \beta \in A(S)$ tale per cui $(\alpha \circ \beta) \neq
    (\beta \circ \alpha)$.
\end{lemma}

\begin{proof}
    Se $S$ consta di più di due elementi, $S$ possiede almeno tre elementi $s_1, s_2, s_3$,
    possiamo definire due applicazioni $\sigma$ e $\tau$ come segue:

    \begin{itemize}
        \item $\sigma(s_1) = s_2$, $\sigma(s_2) = s_3$, $\sigma(s_3) = s_1$.
        \item $\tau(s_1) = s_1$, $\tau(s_2) = s_3$, $\tau(s_3) = s_2$.
        \item $\sigma(a) = \tau(a) = a \forall a \notin \{s_1, s_2, s_3\}$.
    \end{itemize}

    Allora $(\sigma \circ \tau)(s_1) = \sigma(s_1) = s_2$ e
    $(\tau \circ \sigma)(s_1) = \tau(s_2) = s_3$, ma $s_2 \neq s_3$.
\end{proof}
